/*
* Float
* Makes input elements only allow float values
* Ronnie Miller (me@ronniemlr.com)
* http://ronniemlr.com/jquery/float/
*/
function getCaret(a){if(a.selectionStart){return a.selectionStart}else if(document.selection){a.focus();var b=document.selection.createRange();if(b==null){return 0}var c=a.createTextRange(),d=c.duplicate();c.moveToBookmark(b.getBookmark());d.setEndPoint("EndToStart",c);return d.text.length}return 0}function getTextSelection(a){var a;var b;if(document.selection!=undefined){a.focus();var c=document.selection.createRange();b=c.text}else if(a.selectionStart!=undefined){var d=a.selectionStart;var e=a.selectionEnd;b=a.value.substring(d,e)}return b}(function(a){a.fn.float=function(b){return this.each(function(){if(!a(this).is("input[type=text]"))return;var c={precision:2},d=a.extend({},c,b);a(this).live("keydown",function(b){control_key=b.metaKey||b.keyCode==46||b.keyCode==190||b.keyCode==8||b.keyCode==9||b.keyCode==37||b.keyCode==39;string=a(this).val();decimals=string.indexOf(".");if(b.keyCode==190&&decimals>=0){b.preventDefault()}node=a(this).get(0);caret=getCaret(node);selection=getTextSelection(node);if(b.keyCode==37)caret-=1;if(b.keyCode==39)caret+=1;if(caret>string.length)caret=string.length;if(caret<0)caret=0;if(!control_key&&decimals>=0&&string.substring(decimals+1).length>=d.precision&&caret>decimals&&selection.length==0){b.preventDefault()}if(!control_key){if(!(caret==0&&b.keyCode==189||b.keyCode==109)&&(b.shiftKey||(b.keyCode<48||b.keyCode>57)&&(b.keyCode<96||b.keyCode>105))){b.preventDefault()}}})})}})(jQuery)
